<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleDUTRemote: SimpleJsonRpc.SimpleRpcServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleDUTRemote
   </div>
   <div id="projectbrief">A simple automation solution</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_simple_json_rpc.html">SimpleJsonRpc</a></li><li class="navelem"><a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html">SimpleRpcServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#events">Events</a> &#124;
<a href="class_simple_json_rpc_1_1_simple_rpc_server-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SimpleJsonRpc.SimpleRpcServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main class for the RPC system.  
 <a href="class_simple_json_rpc_1_1_simple_rpc_server.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5f6b8843730425588133c7e26e26655"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#ab5f6b8843730425588133c7e26e26655">Start</a> (int serverPort=8000, IPAddress ip=null, int? broadcastPort=null)</td></tr>
<tr class="memdesc:ab5f6b8843730425588133c7e26e26655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the internal json rpc server, on a specific port. Optionally start broadcast server.  <a href="class_simple_json_rpc_1_1_simple_rpc_server.html#ab5f6b8843730425588133c7e26e26655">More...</a><br /></td></tr>
<tr class="separator:ab5f6b8843730425588133c7e26e26655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db249677b723fe5d021559208bf949c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a0db249677b723fe5d021559208bf949c">Stop</a> ()</td></tr>
<tr class="memdesc:a0db249677b723fe5d021559208bf949c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the internal json rpc server.  <a href="class_simple_json_rpc_1_1_simple_rpc_server.html#a0db249677b723fe5d021559208bf949c">More...</a><br /></td></tr>
<tr class="separator:a0db249677b723fe5d021559208bf949c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7019a9735b4c41f2e959c6abd1037fbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a7019a9735b4c41f2e959c6abd1037fbd">Register</a> (object rpcObject)</td></tr>
<tr class="memdesc:a7019a9735b4c41f2e959c6abd1037fbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an object that has <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_method.html">SimpleRpcMethod</a> annotations.  <a href="class_simple_json_rpc_1_1_simple_rpc_server.html#a7019a9735b4c41f2e959c6abd1037fbd">More...</a><br /></td></tr>
<tr class="separator:a7019a9735b4c41f2e959c6abd1037fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d9110efcc19ad993acdf5d7dce0aafc"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a3d9110efcc19ad993acdf5d7dce0aafc">HandleJsonString</a> (string jsonString)</td></tr>
<tr class="memdesc:a3d9110efcc19ad993acdf5d7dce0aafc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually process an inbound json rpc request.  <a href="class_simple_json_rpc_1_1_simple_rpc_server.html#a3d9110efcc19ad993acdf5d7dce0aafc">More...</a><br /></td></tr>
<tr class="separator:a3d9110efcc19ad993acdf5d7dce0aafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d48dd0f891b407b13f34aef2d3598f"><td class="memItemLeft" align="right" valign="top"><a id="af7d48dd0f891b407b13f34aef2d3598f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>HandleClient</b> (TcpClient client)</td></tr>
<tr class="separator:af7d48dd0f891b407b13f34aef2d3598f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a9ed4c00fb626910be443a94bb6a3871a"><td class="memItemLeft" align="right" valign="top"><a id="a9ed4c00fb626910be443a94bb6a3871a"></a>
static AsyncLocal&lt; IPEndPoint &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>currentClient</b><code> [get]</code></td></tr>
<tr class="separator:a9ed4c00fb626910be443a94bb6a3871a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="events"></a>
Events</h2></td></tr>
<tr class="memitem:aa1640508f47c8f9fc618ba6b06260f79"><td class="memItemLeft" align="right" valign="top"><a id="aa1640508f47c8f9fc618ba6b06260f79"></a>
Action&#160;</td><td class="memItemRight" valign="bottom"><b>Starting</b> = new AsyncLocal&lt;IPEndPoint&gt;()</td></tr>
<tr class="separator:aa1640508f47c8f9fc618ba6b06260f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab576f85b4e4c4059c1a79efb61aa5d27"><td class="memItemLeft" align="right" valign="top"><a id="ab576f85b4e4c4059c1a79efb61aa5d27"></a>
Action&#160;</td><td class="memItemRight" valign="bottom"><b>Stopping</b></td></tr>
<tr class="separator:ab576f85b4e4c4059c1a79efb61aa5d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main class for the RPC system. </p>
<p>The RpcServer class handles processing RPC requests. It can be used either as a stand-alone server, or with an existing solution (and just provide parsing, method lookup and execution, and result serialization).</p>
<p>The general flow for using this class is:</p><ul>
<li>Mark methods you want to call using the <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_method.html">SimpleRpcMethod</a> attribute.</li>
<li>Pass objects that have the attribute to the <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a7019a9735b4c41f2e959c6abd1037fbd" title="Register an object that has SimpleRpcMethod annotations.">Register()</a> function.</li>
<li>(For internal server) Call <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#ab5f6b8843730425588133c7e26e26655" title="Start the internal json rpc server, on a specific port. Optionally start broadcast server.">Start()</a> to start the server.</li>
<li>(For other server) Call <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a3d9110efcc19ad993acdf5d7dce0aafc" title="Manually process an inbound json rpc request.">HandleJsonString()</a> to handle inbound requests.</li>
</ul>
<p>This class handles parsing requests, looking up and running methods, and serializing results. If you're looking for the functions that you can call via RPC, please see you should review the documentation for the registered object.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3d9110efcc19ad993acdf5d7dce0aafc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d9110efcc19ad993acdf5d7dce0aafc">&#9670;&nbsp;</a></span>HandleJsonString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string SimpleJsonRpc.SimpleRpcServer.HandleJsonString </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>jsonString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manually process an inbound json rpc request. </p>
<p>If you aren't using the built in server, you can use this method to manually process a json-rpc string, and have it return the result string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsonString</td><td>Json rpc request (as a string)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Json rpc result, as a string.</dd></dl>

</div>
</div>
<a id="a7019a9735b4c41f2e959c6abd1037fbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7019a9735b4c41f2e959c6abd1037fbd">&#9670;&nbsp;</a></span>Register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SimpleJsonRpc.SimpleRpcServer.Register </td>
          <td>(</td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>rpcObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register an object that has <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_method.html">SimpleRpcMethod</a> annotations. </p>
<p>Register functions (with the <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_method.html">SimpleRpcMethod</a> annotation) with the rpc system. Once registered, inbound rpc requests can call methods that were annotated.</p>
<p>This stores a copy of the object - any inbound rpc call that matches a registered method name will be called against the provided object.</p>
<p>If you register several objects that have an annotated function with the same name, the last one registered will be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rpcObject</td><td>Object with <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_method.html">SimpleRpcMethod</a> annotations.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5f6b8843730425588133c7e26e26655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5f6b8843730425588133c7e26e26655">&#9670;&nbsp;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task SimpleJsonRpc.SimpleRpcServer.Start </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>serverPort</em> = <code>8000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IPAddress&#160;</td>
          <td class="paramname"><em>ip</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>broadcastPort</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the internal json rpc server, on a specific port. Optionally start broadcast server. </p>
<p>This starts a TcpListener on the given port, listens for inbound json rpc requests, reads to the first new line character, parses the request, calls the appropriate registered method based on the method name, and sends back the json rpc response.</p>
<p>If broadcastPort is specified, it will create a UDP listener on the given port, and wait for broadcast packets with the message "SimpleJsonRpc Ping". When one is received, it will respond with the current json rpc server port. This is primarily used in lab test environments only.</p>
<p>If you plan on using this behind another server, you may be better served by skipping this method and using <a class="el" href="class_simple_json_rpc_1_1_simple_rpc_server.html#a3d9110efcc19ad993acdf5d7dce0aafc" title="Manually process an inbound json rpc request.">HandleJsonString()</a> directly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serverPort</td><td>Port to listen for rpc requests</td></tr>
    <tr><td class="paramname">ip</td><td>IP to bind to - use null for all interfaces.</td></tr>
    <tr><td class="paramname">broadcastPort</td><td>Port to use to listen for broadcast pings. Use null to disable broadcast support.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task for the running server.</dd></dl>

</div>
</div>
<a id="a0db249677b723fe5d021559208bf949c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db249677b723fe5d021559208bf949c">&#9670;&nbsp;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SimpleJsonRpc.SimpleRpcServer.Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops the internal json rpc server. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>SimpleJsonRpc/SimpleRpcServer.cs</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
